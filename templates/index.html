<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fridge 2 Plate - What to Cook with Your Ingredients</title>
    <meta name="description" content="Enter your fridge ingredients and get 5 delicious meal ideas. Perfect recipe suggestions based on what you already have!">
    <meta name="keywords" content="recipe ideas, cooking with ingredients, what to cook, meal suggestions, fridge ingredients">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://fridge2plate.com/">
    <meta property="og:title" content="Fridge 2 Plate - Recipe Ideas from Your Ingredients">
    <meta property="og:description" content="Get 5 delicious meal ideas based on ingredients you already have">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://fridge2plate.com/">
    <meta property="twitter:title" content="Fridge 2 Plate - Recipe Ideas from Your Ingredients">
    <meta property="twitter:description" content="Get 5 delicious meal ideas based on ingredients you already have">
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8208278723795169" crossorigin="anonymous"></script>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: #d4c4a0 100%;
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .container {
            max-width: 70%;
        }
        
        @media (max-width: 1200px) {
            .container {
                max-width: 80%;
            }
        }
        
        @media (max-width: 992px) {
            .container {
                max-width: 85%;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                max-width: 95%;
                padding: 10px;
            }
        }
        
        @media (max-width: 576px) {
            .container {
                max-width: 100%;
                padding: 5px;
            }
        }
        
        .card {
            border: none;
            border-radius: 15px;
            
            backdrop-filter: blur(10px);
            background: #d4c4a0 100%;

        }
        
        .header-card {
            background:  #d4c4a0;
            color: #5a4a3a;
            text-align: center;
        }
        
        .meal-card {
            margin-bottom: 15px;
            border-left: 4px solid #c9b896;
            transition: transform 0.2s, box-shadow 0.2s;
            background: #fefdfb;
            cursor: pointer;
            position: relative;
        }
        
        .meal-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 127, 108, 0.2);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateX(100px);
            }
            to { 
                opacity: 1; 
                transform: translateX(0);
            }
        }
        
        @keyframes slideOut {
            from { 
                opacity: 1; 
                transform: translateX(0);
            }
            to { 
                opacity: 0; 
                transform: translateX(100px);
            }
        }
       
        .btn-primary {
            background: linear-gradient(45deg, #c9b896, #b8a586);
            border: none;
            border-radius: 25px;
            padding: 10px 30px;
            font-weight: 600;
            transition: all 0.3s;
            color: #5a4a3a;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 127, 108, 0.3);
            background: linear-gradient(45deg, #b8a586, #a69476);
            color: #4a3a2a;
        }
        
        .ingredient-tag {
            background: #f0ebe1;
            color: #6b5b4b;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            margin: 2px;
            display: inline-block;
            border: 1px solid #e0d5c1;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner-border {
            color: #c9b896;
        }
        
        .ads-placeholder {
            background: #f8f6f1;
            border: 2px dashed #d4c4a0;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            color: #8a7a6a;
            margin: 20px 0;
        }
        
        .footer {
            background: rgba(212, 196, 160, 0.3);
            color: #5a4a3a;
            text-align: center;
            padding: 20px;
            margin-top: 50px;
            border-radius: 15px;
        }
        
        .form-control {
            border-radius: 10px;
            border: 2px solid #e8dcc0;
            transition: border-color 0.3s;
            background: #fefdfb;
        }
        
        .form-control:focus {
            border-color: #c9b896;
            box-shadow: 0 0 0 0.2rem rgba(201, 184, 150, 0.25);
            background: #ffffff;
        }
        
        .text-primary {
            color: #8a7a6a !important;
        }
        
        .alert-success {
            background-color: #f0ebe1;
            border-color: #d4c4a0;
            color: #6b5b4b;
        }
        
        h1, h2, h3, h4, h5, h6 {
            color: #5a4a3a;
        }
        
        /* Modal Styles */
        .recipe-modal {
            background-color: rgba(90, 74, 58, 0.8);
        }
        
        .recipe-modal .modal-content {
            background: #fefdfb;
            border: none;
            border-radius: 15px;
            border: 2px solid #d4c4a0;
        }
        
        .recipe-modal .modal-header {
            background: linear-gradient(45deg, #d4c4a0, #c9b896);
            color: #5a4a3a;
            border-bottom: none;
            border-radius: 15px 15px 0 0;
        }
        
        .recipe-modal .modal-title {
            font-weight: 600;
        }
        
        .recipe-text-area {
            background: #f8f6f1;
            border: 2px solid #e8dcc0;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            resize: none;
            color: #5a4a3a;
        }
        
        .recipe-text-area:focus {
            border-color: #c9b896;
            box-shadow: 0 0 0 0.2rem rgba(201, 184, 150, 0.25);
            outline: none;
        }
        
        .copy-btn {
            background: linear-gradient(45deg, #c9b896, #b8a586);
            border: none;
            border-radius: 25px;
            color: #5a4a3a;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .copy-btn:hover {
            background: linear-gradient(45deg, #b8a586, #a69476);
            color: #4a3a2a;
            transform: translateY(-2px);
        }
        
        .copy-success {
            color: #28a745 !important;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class=" container py-4">
        <!-- Header -->
        <div class="card header-card mb-4">
            <div class="card-body">
                <h1 class="display-4 mb-3">
                    <i class="fas fa-utensils"></i> Fridge to Fork
                </h1>
                <p class="lead">Tell us what's in your fridge and get 5 delicious meal ideas!</p>
                <p class="mb-0">Turn your ingredients into amazing recipes</p>
            </div>
        </div>

        <!-- Input Form -->
        <div class="card mb-4" style="align-items: center;">
            <div class="card-body" style="max-width: 85%; ;">
                <h3 class="card-title mb-4">
                    <i class="fas fa-refrigerator text-primary"></i> What's in Your Fridge?
                </h3>
                
                <form id="mealForm">
                    <div class="mb-3">
                        <label for="ingredients" class="form-label">
                            <i class="fas fa-list"></i> Enter your ingredients
                        </label>
                        <div class="mx-auto" style="max-width: 100%;">
                            <textarea class="form-control" id="ingredients" rows="4" placeholder="..." required></textarea>
                        </div>
                        <div id="ingredientPreview" class="mt-2 text-center" style="display: none;">
                            <small class="text-muted">
                                <i class="fas fa-eye"></i> Detected ingredients: <span id="previewText" class="fw-bold text-primary"></span>
                            </small>
                        </div>
                        <div class="mt-2 text-center">
                            <small class="text-muted">
                                <i class="fas fa-lightbulb"></i> 
                                <strong>Examples:</strong> "eggs chicken rice"
                            </small>
                        </div>
                    </div>
                    
                    <div class="text-center">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="fas fa-magic"></i> Get My Recipe Ideas!
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Loading -->
        <div id="loading" class="loading">
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-2">Finding the perfect recipes for your ingredients...</p>
        </div>

        <!-- Results -->
        <div id="results" style="display: none;">
            <div class="card mb-4">
                <div class="card-body">
                    <h3 class="card-title text-center mb-4">
                        <i class="fas fa-heart text-danger"></i> Your Perfect Recipe Ideas
                    </h3>
                    <div id="mealResults"></div>
                </div>
            </div>
        </div>

        <!-- Ad Space 2 -->
        <div class="ads-placeholder">
            <!-- AdSense Display Ad 1 -->
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8208278723795169" crossorigin="anonymous"></script>
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-8208278723795169"
                 data-ad-slot="YYYYYYYYYY"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <!-- SEO Content -->
        <div class="card mb-4">
            <div class="card-body">
                <h2>Why Fridge 2 Plate?</h2>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <h5><i class="fas fa-lightbulb text-warning"></i> Smart Cooking</h5>
                        <p>Get creative recipe ideas using ingredients you already have. No more food waste!</p>
                    </div>
                    <div class="col-md-4 mb-3">
                        <h5><i class="fas fa-clock text-info"></i> Quick & Easy</h5>
                        <p>Simple recipes with clear instructions that you can make in 30 minutes or less.</p>
                    </div>
                    <div class="col-md-4 mb-3">
                        <h5><i class="fas fa-heart text-success"></i> Personalized</h5>
                        <p>AI-powered suggestions tailored to your specific ingredients and preferences.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Popular Ingredients -->
        <div class="card mb-4">
            <div class="card-body">
                <h3>Popular Recipe Combinations</h3>
                <div class="row">
                    <div class="col-md-6">
                        <h5>With Eggs:</h5>
                        <ul>
                            <li>Egg Fried Rice</li>
                            <li>Pasta Carbonara</li>
                            <li>Vegetable Omelet</li>
                            <li>Breakfast Sandwich</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h5>With Chicken:</h5>
                        <ul>
                            <li>Chicken Stir-fry</li>
                            <li>Chicken Pasta</li>
                            <li>Chicken Soup</li>
                            <li>Chicken Salad</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ad Space 1 -->
        <div class="ads-placeholder">
            <!-- AdSense Display Ad 2 -->
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8208278723795169" crossorigin="anonymous"></script>
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-8208278723795169"
                 data-ad-slot="ZZZZZZZZZZ"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <!-- Recipe Modal -->
        <div class="modal fade recipe-modal" id="recipeModal" tabindex="-1" aria-labelledby="recipeModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="recipeModalLabel">
                            <i class="fas fa-clipboard"></i> Copy Recipe
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="recipeTextArea" class="form-label">
                                <i class="fas fa-copy"></i> Detailed Recipe Instructions - Ready to Copy:
                            </label>
                            <div class="alert alert-info text-center mb-2">
                                <small><i class="fas fa-lightbulb"></i> This contains detailed instructions with prep time, cook time, and helpful tips!</small>
                            </div>
                            <textarea class="form-control recipe-text-area" id="recipeTextArea" rows="18" readonly></textarea>
                        </div>
                        <div class="d-grid gap-2">
                            <button type="button" class="btn copy-btn btn-lg" id="copyRecipeBtn">
                                <i class="fas fa-copy"></i> Copy to Clipboard
                            </button>
                            <small class="text-center text-muted">
                                You can paste this recipe anywhere - notes app, email, shopping list, etc.
                            </small>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>&copy; 2025 Fridge 2 Plate | Turn your ingredients into amazing recipes</p>
            <p>
                <small>
                    <a href="/privacy" style="color: #8a7a6a; text-decoration: none;">Privacy Policy</a> | 
                    <a href="/terms" style="color: #8a7a6a; text-decoration: none;">Terms of Service</a>
                </small>
            </p>
            <p>
                <small>
                    Recipe ideas | Cooking with ingredients | Meal suggestions | Food inspiration
                </small>
            </p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('mealForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const ingredientsText = document.getElementById('ingredients').value;
            
            // Smart parsing: if there are commas, split by comma; otherwise split by space
            let ingredients = [];
            if (ingredientsText.includes(',')) {
                // Split by comma and clean up
                ingredients = ingredientsText.split(',').map(s => s.trim()).filter(s => s);
            } else {
                // Split by spaces and clean up
                ingredients = ingredientsText.split(/\s+/).map(s => s.trim()).filter(s => s);
            }
            
            if (!ingredients.length) {
                alert('Please enter at least one ingredient');
                return;
            }
            
            // Show loading
            document.getElementById('loading').style.display = 'block';
            document.getElementById('results').style.display = 'none';
            
            try {
                const response = await fetch('/get_meals', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        ingredients: ingredients
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    displayMeals(data.meals, data.ingredients);
                } else {
                    throw new Error(data.error || 'Failed to get recipe ideas');
                }
                
            } catch (error) {
                console.error('Error:', error);
                alert('Sorry, there was an error getting your recipe ideas. Please try again.');
            } finally {
                document.getElementById('loading').style.display = 'none';
            }
        });
        
        // Real-time ingredient parsing preview
        document.getElementById('ingredients').addEventListener('input', function() {
            const ingredientsText = this.value.trim();
            const preview = document.getElementById('ingredientPreview');
            const previewText = document.getElementById('previewText');
            
            if (ingredientsText) {
                // Parse ingredients the same way as in form submission
                let ingredients = [];
                if (ingredientsText.includes(',')) {
                    ingredients = ingredientsText.split(',').map(s => s.trim()).filter(s => s);
                } else {
                    ingredients = ingredientsText.split(/\s+/).map(s => s.trim()).filter(s => s);
                }
                
                if (ingredients.length > 0) {
                    previewText.textContent = ingredients.join(', ') + ` (${ingredients.length} ingredient${ingredients.length > 1 ? 's' : ''})`;
                    preview.style.display = 'block';
                } else {
                    preview.style.display = 'none';
                }
            } else {
                preview.style.display = 'none';
            }
        });
        
        function displayMeals(meals, ingredients) {
            const resultsContainer = document.getElementById('mealResults');
            
            // Store meals data globally for modal access
            window.currentMeals = meals;
            
            let html = `<div class="alert alert-success text-center mb-4">
                <h5><i class="fas fa-check-circle"></i> Found ${meals.length} perfect recipes using your ingredients!</h5>
                <p class="mb-0">Using: <span class="fw-bold">${ingredients.join(', ')}</span></p>
                <small class="text-muted">(${ingredients.length} ingredient${ingredients.length > 1 ? 's' : ''} detected)</small>
            </div>`;
            
            meals.forEach((meal, index) => {
                html += `
                    <div class="meal-card card clickable-recipe-card" data-meal-index="${index}">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-3">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-utensils text-primary"></i> ${meal.name}
                                </h5>
                                
                            </div>
                            
                            <div class="mb-3">
                                <h6><i class="fas fa-shopping-list"></i> Ingredients:</h6>
                                <div>
                                    ${meal.ingredients.map(ing => `<span class="ingredient-tag">${ing}</span>`).join('')}
                                </div>
                            </div>
                            
                            <div>
                                <h6><i class="fas fa-book-open"></i> Instructions:</h6>
                                <p class="text-muted">${meal.instructions}</p>
                            </div>
                            
                            <div class="text-center mt-3">
                                <small class="text-muted">
                                    <i class="fas fa-hand-pointer"></i> Click anywhere on this card to copy the recipe
                                </small>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            resultsContainer.innerHTML = html;
            document.getElementById('results').style.display = 'block';
            
            // Add event listeners to copy buttons
            document.querySelectorAll('.copy-recipe-btn').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation(); // Prevent card click event
                    const mealIndex = parseInt(this.getAttribute('data-meal-index'));
                    const meal = window.currentMeals[mealIndex];
                    openRecipeModal(meal.name, meal.ingredients, meal.instructions, meal.detailed_instructions);
                });
            });
            
            // Add event listeners to clickable recipe cards
            document.querySelectorAll('.clickable-recipe-card').forEach(card => {
                card.addEventListener('click', function() {
                    const mealIndex = parseInt(this.getAttribute('data-meal-index'));
                    const meal = window.currentMeals[mealIndex];
                    openRecipeModal(meal.name, meal.ingredients, meal.instructions, meal.detailed_instructions);
                });
            });
            
            // Scroll to results
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }
        
        // Modal functionality for copying recipes
        function openRecipeModal(recipeName, ingredients, instructions, detailedInstructions) {
            // Use detailed instructions if available, otherwise fall back to regular instructions
            const instructionsToUse = detailedInstructions || instructions;
            
            // Format the recipe text for copying
            const recipeText = formatRecipeForCopy(recipeName, ingredients, instructionsToUse);
            
            // Populate the textarea
            document.getElementById('recipeTextArea').value = recipeText;
            
            // Update modal title
            document.getElementById('recipeModalLabel').innerHTML = `<i class="fas fa-clipboard"></i> Copy Recipe: ${recipeName}`;
            
            // Show the modal
            const modal = new bootstrap.Modal(document.getElementById('recipeModal'));
            modal.show();
            
            // Auto-select all text when modal opens for easier copying
            setTimeout(() => {
                const textarea = document.getElementById('recipeTextArea');
                textarea.select();
                textarea.setSelectionRange(0, 99999); // For mobile devices
            }, 300);
        }
        
        function formatRecipeForCopy(recipeName, ingredients, instructions) {
            const formattedIngredients = ingredients.map((ing, index) => `${index + 1}. ${ing}`).join('\n');
            
            return `🍳 ${recipeName}
═══════════════════════════════════════

📋 INGREDIENTS:
${formattedIngredients}

📖 INSTRUCTIONS:
${instructions}

═══════════════════════════════════════
Generated by Fridge 2 Plate 🍽️
Visit: https://fridge2plate.com`;
        }
        
        // Copy to clipboard functionality
        document.getElementById('copyRecipeBtn').addEventListener('click', async function() {
            const textarea = document.getElementById('recipeTextArea');
            const copyBtn = this;
            const originalText = copyBtn.innerHTML;
            
            try {
                // Modern browsers
                await navigator.clipboard.writeText(textarea.value);
                
                // Success feedback
                copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied Successfully!';
                copyBtn.classList.add('copy-success');
                copyBtn.style.background = '#28a745';
                copyBtn.style.color = 'white';
                
                // Reset button after 3 seconds
                setTimeout(() => {
                    copyBtn.innerHTML = originalText;
                    copyBtn.classList.remove('copy-success');
                    copyBtn.style.background = '';
                    copyBtn.style.color = '';
                }, 3000);
                
            } catch (err) {
                // Fallback for older browsers
                textarea.select();
                textarea.setSelectionRange(0, 99999);
                
                try {
                    document.execCommand('copy');
                    copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied Successfully!';
                    copyBtn.classList.add('copy-success');
                    copyBtn.style.background = '#28a745';
                    copyBtn.style.color = 'white';
                    
                    setTimeout(() => {
                        copyBtn.innerHTML = originalText;
                        copyBtn.classList.remove('copy-success');
                        copyBtn.style.background = '';
                        copyBtn.style.color = '';
                    }, 3000);
                } catch (fallbackErr) {
                    copyBtn.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Please select and copy manually';
                    copyBtn.style.background = '#dc3545';
                    copyBtn.style.color = 'white';
                    
                    setTimeout(() => {
                        copyBtn.innerHTML = originalText;
                        copyBtn.style.background = '';
                        copyBtn.style.color = '';
                    }, 3000);
                }
            }
        });
        
        // Add auto-copy functionality when modal opens
        let autoRecipeText = '';
        window.addEventListener('DOMContentLoaded', function() {
            const recipeModal = document.getElementById('recipeModal');
            if (recipeModal) {
                recipeModal.addEventListener('shown.bs.modal', async function() {
                    const textarea = document.getElementById('recipeTextArea');
                    autoRecipeText = textarea.value;
                    
                    // Show a subtle notification that text is ready to copy
                    const notification = document.createElement('div');
                    notification.innerHTML = '<i class="fas fa-info-circle"></i> Recipe text is selected and ready to copy!';
                    notification.style.cssText = `
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        background: rgba(201, 184, 150, 0.95);
                        color: #5a4a3a;
                        padding: 10px 15px;
                        border-radius: 8px;
                        font-size: 14px;
                        font-weight: 600;
                        z-index: 9999;
                        animation: slideIn 0.3s ease-out;
                        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    `;
                    
                    document.body.appendChild(notification);
                    
                    // Remove notification after 3 seconds
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.style.animation = 'slideOut 0.3s ease-in';
                            setTimeout(() => {
                                if (notification.parentNode) {
                                    notification.parentNode.removeChild(notification);
                                }
                            }, 300);
                        }
                    }, 3000);
                });
            }
        });
    </script>
</body>
</html>
